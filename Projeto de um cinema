package cinema.java;

import java.util.Scanner;

public class Main {
	public static void main(String[] args) {

		Scanner sc = new Scanner(System.in);
		System.out.println("Seja bem vindo ao nosso cinema");
		System.out.println("Qual e o seu nome?");
		String nome = sc.next();
		System.out.println("Seja bem vindo, " + nome + "!");

		Cinema cinema = new Cinema("CineMax", "Planaltina-Go", 5, 100, new int[] { 1, 2, 3 }, new String[][] {
				{ "Matrix", "Interestelar" }, { "Jumanji", "Star Wars" }, { "Harry Potter", "O Senhor dos Anéis" } });

		cinema.listarSessoes();

		System.out.println("Qual sessao voce gostaria de assistir?");
		int sessao = sc.nextInt();
		if (cinema.sessaoValida(sessao)) {
			cinema.listarFilmes(sessao);
		} else {
			System.out.println("Sesso inválida!");
		}
		while (!cinema.sessaoValida(sessao));
	    
	    cinema.listarFilmes(sessao);
	    
	    System.out.println("Qual filme você gostaria de assistir?");
	    String filme = sc.next();
	    cinema.venderIngresso(sessao, filme);
	    
	    sc.close();
	}
}

class Cinema {
	String nome;
	String endereco;
	int numeroDeSalas;
	int capacidadeTotal;
	int sessoes[];
	String filmes[][];
	int ingressosVendidos[];
	private Scanner sc;

	public Cinema(String nome, String endereco, int numeroDeSalas, int capacidadeTotal, int sessoes[],
			String filmes[][]) {
		this.nome = nome;
		this.endereco = endereco;
		this.numeroDeSalas = numeroDeSalas;
		this.capacidadeTotal = capacidadeTotal;
		this.sessoes = sessoes;
		this.filmes = filmes;
		this.ingressosVendidos = new int[sessoes.length];
		for (int i = 0; i < ingressosVendidos.length; i++) {
			ingressosVendidos[i] = 0;
		}
	    this.sc = new Scanner(System.in); // Adicione esta linha para inicializar o Scanner.

	}

	public void venderIngresso(int sessao, String filmeEscolhido) {
		int indiceSessao = sessao - 1;
		int indiceFilme = -1;
		for (int i = 0; i < filmes[indiceSessao].length; i++) {
			if (filmes[indiceSessao][i].equals(filmeEscolhido)) {
				indiceFilme = i;
				break;
			}
		}
		if (indiceFilme == -1) {
			System.out.println("Filme escolhido não disponivel para a sessão escolhida.");
			return;
		}
		int ingressosDisponiveis = capacidadeTotal / numeroDeSalas - ingressosVendidos[indiceSessao];
		if (ingressosDisponiveis <= 0) {
			System.out.println("Capacidade da sessao esgotada.");
			return;
		}
		double preco = calcularPreco(sessao, indiceFilme);
		System.out.println("O valor do ingresso e: R$" + preco);
		System.out.println("Formas de pagamento disponiveis: dinheiro, cartao de credito ou debito.");
		
		String formaDePagamento = sc.next();
	    System.out.println("Pagamento realizado com sucesso!");
	}

	private double calcularPreco(int sessao, int indiceFilme) {
		double precoBase = 20.0; 

		switch (sessao) {
			case 1:
				switch (indiceFilme) {
					case 0: // Matrix
						return precoBase * 1.2;
					case 1: // Interestelar
						return precoBase * 1.3;
				}
		}
		return precoBase;
		}
	public void listarSessoes() {
		System.out.println("Sessoes disponiveis:");
		for (int i = 0; i < sessoes.length; i++) {
			System.out.println("Sessao " + sessoes[i]);
		}
	}

	public void listarFilmes(int sessao) {
		if (ingressosVendidos[sessao - 1] < capacidadeTotal / numeroDeSalas) {
			System.out.println("Filmes disponiveis para a sessao " + sessao + ":");
			for (int i = 0; i < filmes[sessao - 1].length; i++) {
				System.out.println(filmes[sessao - 1][i]);
			}
		} else {
			System.out.println("Capacidade da sessao esgotada!");
		}
	}

	public boolean sessaoValida(int sessao) {
		for (int i = 0; i < sessoes.length; i++) {
			if (sessoes[i] == sessao) {
				return true;
			}
		}
		return false;
	}
}
